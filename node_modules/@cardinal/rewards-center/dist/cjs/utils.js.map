{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../sdk/utils.ts"],"names":[],"mappings":";;;AAAA,8CAA0C;AAC1C,oEAAiF;AACjF,iDAA4C;AAE5C,6CAA4C;AAC5C,iCAA2B;AAE3B,+BAAyC;AAE5B,QAAA,mBAAmB,GAAG,IAAI,mBAAS,CAC9C,6CAA6C,CAC9C,CAAC;AAEF;;;;GAIG;AACI,MAAM,wBAAwB,GAAG,KAAK,EAC3C,UAAsB,EACtB,WAAsB,EACtB,WAAsB,EACtB,IAAe,EACf,UAAoB,EACA,EAAE;IACtB,IAAI,UAAU,KAAK,SAAS,EAAE;QAC5B,MAAM,IAAI,GAAG,MAAM,IAAA,mBAAO,EAAC,UAAU,EAAE,WAAW,CAAC,CAAC;QACpD,MAAM,MAAM,GAAG,IAAI,UAAE,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC9C,UAAU,GAAG,MAAM,CAAC,EAAE,CAAC,IAAI,UAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACnC;IACD,OAAO,IAAA,sBAAgB,EAAC,WAAW,EAAE,WAAW,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;AACtE,CAAC,CAAC;AAbW,QAAA,wBAAwB,4BAanC;AAEK,MAAM,kBAAkB,GAAG,CAAC,MAAiB,EAAa,EAAE;IACjE,OAAO,IAAA,+BAAsB,EAC3B;QACE,cAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACnC,2BAAmB,CAAC,QAAQ,EAAE;QAC9B,MAAM,CAAC,QAAQ,EAAE;KAClB,EACD,2BAAmB,CACpB,CAAC,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AATW,QAAA,kBAAkB,sBAS7B;AAEK,MAAM,iBAAiB,GAAG,CAAC,MAAiB,EAAa,EAAE;IAChE,OAAO,IAAA,+BAAsB,EAC3B;QACE,cAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACnC,2BAAmB,CAAC,QAAQ,EAAE;QAC9B,MAAM,CAAC,QAAQ,EAAE;QACjB,cAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;KACnC,EACD,2BAAmB,CACpB,CAAC,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAVW,QAAA,iBAAiB,qBAU5B","sourcesContent":["import { utils } from \"@coral-xyz/anchor\";\nimport { findProgramAddressSync } from \"@coral-xyz/anchor/dist/cjs/utils/pubkey\";\nimport { getMint } from \"@solana/spl-token\";\nimport type { Connection } from \"@solana/web3.js\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { BN } from \"bn.js\";\n\nimport { findStakeEntryId } from \"./pda\";\n\nexport const METADATA_PROGRAM_ID = new PublicKey(\n  \"metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s\"\n);\n\n/**\n * Convenience method to find the stake entry id from a mint\n * NOTE: This will lookup the mint on-chain to get the supply\n * @returns\n */\nexport const findStakeEntryIdFromMint = async (\n  connection: Connection,\n  stakePoolId: PublicKey,\n  stakeMintId: PublicKey,\n  user: PublicKey,\n  isFungible?: boolean\n): Promise<PublicKey> => {\n  if (isFungible === undefined) {\n    const mint = await getMint(connection, stakeMintId);\n    const supply = new BN(mint.supply.toString());\n    isFungible = supply.gt(new BN(1));\n  }\n  return findStakeEntryId(stakePoolId, stakeMintId, user, isFungible);\n};\n\nexport const findMintMetadataId = (mintId: PublicKey): PublicKey => {\n  return findProgramAddressSync(\n    [\n      utils.bytes.utf8.encode(\"metadata\"),\n      METADATA_PROGRAM_ID.toBuffer(),\n      mintId.toBuffer(),\n    ],\n    METADATA_PROGRAM_ID\n  )[0];\n};\n\nexport const findMintEditionId = (mintId: PublicKey): PublicKey => {\n  return findProgramAddressSync(\n    [\n      utils.bytes.utf8.encode(\"metadata\"),\n      METADATA_PROGRAM_ID.toBuffer(),\n      mintId.toBuffer(),\n      utils.bytes.utf8.encode(\"edition\"),\n    ],\n    METADATA_PROGRAM_ID\n  )[0];\n};\n"]}